<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>KQLBuilder Query</title>
    <script>
        function updateLogTypes() {
            const cloudSelect = document.getElementById("cloud");
            const logTypeSelect = document.getElementById("logType");

            const selectedCloud = cloudSelect.value;
            const logTypes = {
                azure: ["Activity Logs", "Audit Logs", "Diagnostics Logs"],
                aws: ["CloudTrail", "VPC Flow Logs", "Config Logs"],
                gcp: ["Admin Activity", "Data Access", "System Events"]
            };

            // Clear existing options
            logTypeSelect.innerHTML = "";

            // Add new options
            logTypes[selectedCloud].forEach(function(type) {
                const option = document.createElement("option");
                option.value = type.toLowerCase().replace(/\s+/g, "_");
                option.text = type;
                logTypeSelect.add(option);
            });
        }

        document.addEventListener("DOMContentLoaded", updateLogTypes);
    </script>
</head>
<body>
    <h1>KQLBuilder Query Builder</h1>

    <<form action="/query" method="post">
        <label for="cloud">Cloud Provider:</label>
        <select id="cloud" name="cloud" onchange="updateLogTypes()">
            <option value="azure">Azure</option>
            <option value="aws">AWS</option>
            <option value="gcp">GCP</option>
        </select>

        <br><br>

        <label for="logType">Log Type:</label>
        <select id="logType" name="logType">
            <!-- Populated by JS -->
        </select>

        <br><br>

        <label for="filter">Filter:</label>
        <input type="text" id="filter" name="filter" placeholder="e.g., statusCode == 200">

        <br><br>

        <button type="submit">Build Query</button>
    </form>

    <div th:if="${kqlQuery}">
        <h2>Generated KQL Query:</h2>
        <pre th:text="${kqlQuery}"></pre>
    </div>

</body>
</html>
<!-- Compare this snippet from src/main/resources/templates/query.html: -->